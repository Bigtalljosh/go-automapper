# Go AutoMapper

*This repository is forked from [rafiulgits/go-automapper](https://github.com/rafiulgits/go-automapper)*

Go-automapper can automatically map data between different types with identically named fields in GO. Useful for initializing DTO types from build in data.



**Changes**

* Ignored unexported fields in the desination type.

Basically I didn't want to expose my database schema so wanted to map from Ent entities to a request/response model. 

An error was thrown `automapper error: reflect.Value.Interface: cannot return value obtained from unexported field or method` 

due to Ent having unexported private fields on the autogenerated entities.
For my use case at least, it's appropriate to just ignore those fields and continue mapping, hence the small change.

***

### How to use

Install automapper in your go project

```
go get github.com/bigtalljosh/go-automapper
```



* Object - Object Mapping

```go
type A struct {
  Name  string
  Phone string
}

type B struct {
  Name  string
  Phone string
  Email string
}

a := &A{Name: "Tony", Phone: "12355"}
b := &B{}

automapper.Map(a, b, func(src *A, dst *B) {
  dst.Email = "hello@world.com"
})
```



* Slice - Slice Mapping

```go
type A struct {
  Name string
}

type B struct {
  ID   int
  Name string
}

a1 := &A{Name: "One"}
a2 := &A{Name: "Two"}

aSlice := []*A{a1, a2}
bSlice := []*B{}

automapper.Map(aSlice, &bSlice, func(idx int, src *A, dst *B) {
  t.Log(idx, src, dst)
  dst.ID = idx + 1
})

```
